<div>
  {{#if subcategory}}
    <h2>Обновление категории: Id {{subcategory.id}}</h2>
  {{else}}
    <h2>Добавление новой категории</h2>
  {{/if}}

  <form action="/subcategory{{#if subcategory}}/{{subcategory.id}}/update{{/if}}" method="POST">
    <div class="form-group">
      <label>Название:</label>
      <input
        type="text"
        name="name"
        class="form-control"
        placeholder="Привилегии"
        {{#if subcategory}}value="{{subcategory.name}}"{{/if}}
        required
      >
    </div>
    <div class="form-group">
      <label>Команда выдачи:</label>
      <input
        type="text"
        name="giveCommand"
        class="form-control"
        placeholder="комманда"
        {{#if subcategory}}value="{{subcategory.giveCommand}}"{{/if}}
        required
      >
    </div>
    <div class="form-group">
      <label>ID родительской категории:</label>
      <input
        type="number"
        name="categoryId"
        class="form-control"
        placeholder="1"
        {{#if subcategory}}value="{{subcategory.category.id}}"{{/if}}
        required
      >
    </div>

    <button type="submit">
      Сохранить
    </button>
  </form>
</div>


<style>
  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-control {
    border-radius: 4px;
    padding: 0.75rem;
  }
</style>
<ul id="events"></ul>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script>
  const eventList = document.getElementById('events');
  const eventSource = new EventSource('http://localhost:3000/subcategory/sse');

  toastr.options.positionClass = "toast-bottom-right";

  eventSource.onmessage = (e) => {
    toastr.success(e, 'Успех');
  };

  eventSource.onerror = (error) => {
    console.log('EventSource failed:', error);
  };
</script>